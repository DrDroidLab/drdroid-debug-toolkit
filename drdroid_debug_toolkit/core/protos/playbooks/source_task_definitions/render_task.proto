syntax = "proto3";
package core.protos.playbooks;

import "google/protobuf/wrappers.proto";

message Render {
  message ListDeploys {
    google.protobuf.StringValue service_id = 1;
  }

  message GetDeploy {
    google.protobuf.StringValue service_id = 1;
    google.protobuf.StringValue deploy_id = 2;
  }

  message ListServices {
    google.protobuf.BoolValue include_previews = 1;
  }

  message GetService {
    google.protobuf.StringValue service_id = 1;
  }

  message FetchLogs {
    google.protobuf.StringValue service_id = 1;
    google.protobuf.StringValue start_time = 2;  // ISO 8601 or Unix timestamp
    google.protobuf.StringValue end_time = 3;    // ISO 8601 or Unix timestamp
    google.protobuf.Int64Value limit = 4;
    google.protobuf.StringValue instance = 5;    // Comma-separated instance IDs
    google.protobuf.StringValue host = 6;         // Comma-separated host values
    google.protobuf.StringValue status_code = 7;  // Comma-separated status codes
    google.protobuf.StringValue method = 8;       // Comma-separated HTTP methods
    google.protobuf.StringValue task = 9;        // Comma-separated task IDs
    google.protobuf.StringValue task_run = 10;   // Comma-separated task run IDs
    google.protobuf.StringValue level = 11;      // Comma-separated log levels
    google.protobuf.StringValue type = 12;        // Comma-separated log types
    google.protobuf.StringValue text = 13;        // Comma-separated text filters
    google.protobuf.StringValue path = 14;        // Comma-separated path filters
  }

  enum TaskType {
    UNKNOWN = 0;
    LIST_DEPLOYS = 1;
    GET_DEPLOY = 2;
    LIST_SERVICES = 3;
    GET_SERVICE = 4;
    FETCH_LOGS = 5;
  }

  TaskType type = 1;
  oneof task {
    ListDeploys list_deploys = 2;
    GetDeploy get_deploy = 3;
    ListServices list_services = 4;
    GetService get_service = 5;
    FetchLogs fetch_logs = 6;
  }
}
